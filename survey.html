<!DOCTYPE html>
<html>
<head>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="style.css">

  <script src="src/recorder.js"></script>
  <script src="src/Fr.voice.js"></script>
  <script src="js/jquery.js"></script>
  <script src="js/app.js"></script>
  <script src="js/three.min.js"></script>
  <script src="js/sin.js"></script>

</head>
<body>

<div id="top">
<div id="title"><a href="index.html" id="titleLink">Yes or No?</a></div>
<div><a href = "#" onclick="stopRecording();" id="stopButton" id="pause">Pause</a></div>
</div>

<div class="bodyContent">

<div id = "permission">
  <h3>Do we have permission to record this session?</h3>
  <p>The microphone will remain on until the survey ends, or you may choose to turn it off at any time.</p>
  <div class="buttons">
    <a href="index.html" class="secondaryButton inlineButtons">No, end session</a>
  <a href="#" class="primaryButton inlineButtons" id="record" onclick="showInstructions();">Yes, begin recording</a>
</div>
</div>


<div id = "instructions">
  <h3>See the browser prompt at the top of the page to turn on your mic? Please click "Allow."</h3>
  <p>From here on out, say the answer "yes" or "no" for each question. Click the "next" arrow when you are finished answering. There are 25 questions.</p>
<div class="buttons">
<a href = "#" class="primaryButton inlineButtons" onclick="showSurvey();">Begin Survey</a>
</div>
</div>

<div id = "survey">
<p id= "surveyContent"></p>
<div id="spinner"></div>
<a class="primaryLink" id ="next" href="#" onclick="nextElement();">

  <svg id="nextArrow" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 83.8 134"><defs><style>.cls-1{fill:#e5f0cd;}</style></defs><title>next</title><path class="cls-1" d="M74.88,168L58.55,153.74l52.27-52.18L59.45,50.21,74.88,34h1q19.83,20.06,39.67,40.12c8.81,8.88,17.7,17.69,26.76,26.75-1.62,1.72-2.88,3.11-4.21,4.44q-29.4,29.41-58.8,58.82c-1.22,1.22-2.29,2.58-3.42,3.87h-1Z" transform="translate(-58.55 -34.05)"/></svg>

</a>

</div>

<div id="finish">
<a href = "#" id="pause" class="secondaryButton inlineButtons" onclick="modal()">Cancel</a>
<a href = "#" id="download" class="primaryButton inlineButtons" onclick="showEmail()">Download Recording</a>
</div>
</div>

<!-- <button onclick="modal()">Open Modal</button> -->

<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <p>Are you sure you want to stop recording without saving?</p>
    <div class="modalbuttons"><a href = "#" class="secondaryButton inlineButtons" onclick="cancelModal()">No, go back</a>
    <a href = "index.html" class="primaryButton inlineButtons">Yes, leave page</a></div>
  </div>

</div>

<script>

//onload randomly choose a set, and then randomly loop through that set, randomly assign css to each element, onclick Next go to next part of array
var sets = [
["Do you like cupcakes?",
"Is blue your favorite colour?",
"Were you hyper as a child?",
"Do you believe in God?",
"Are you dreaming right now?",
"Is the media biased?",
"Will you make an effort to vote in the next election?",
"Do you believe in life after death?",
"Do you have ten fingers?",
"Do heights scare you?",
"Are you free?",
"Do you eat red meat?",
"Do you identify yourself as left-wing?",
"Do you smoke?","Do you look forward to winter every year?",
"Do you live alone?",
"Are you a generous person?",
"Do you feel satisfied with your life right now?",
"Do you practice yoga?",
"Do you have a chinese friend?",
"Do you like black tea?",
"Do you feel younger than you are?",
"Are your eyes green?",
"Are you usually late to social events?",
"Do you sleepwalk?",
"If you could retire from your job this week, would you do it?",
"Do you usually hold your fork in your right hand.",
"Do you like Picasso?",
"Do you play the violin?",
"Do you enjoy playing chess?",
"Do want to have (more) children?",
"Have you ever tried show boarding?",
"Do you always know when you love someone?",
"Do you have different political views from your grandfather?",
"Have you ever needed to hire a lawyer?",
"Do you own a house?",
"Are you a lesbian?",
"Do you resent any particular ethnic group?",
"Have you ever been to war?",
"Do you have a strong personality?",
"Do you regularly drink coffee?"],
["Do you find cupcakes tasty?",
"Is blue a cold colour?",
"Were you rambunctious as a child?",
"Are you religious?",
"Do you usually remember your dreams?",
"Is unbiased journalism possible?",
"Did you vote in the last election?",
"Have you ever felt too close to death?",
"Do you have all of your fingers and toes?",
"Have you ever gone skydiving?",
"Do you feel stuck or trapped?",
"Do you try to eat organic food?",
"Do you identify yourself as right-wing?",
"Have you ever been a smoker?",
"Is winter a lonely season?",
"Do you live with a romantic partner?",
"Do you help friends in need?",
"Do you have any major regrets in your life?",
"Do you practice meditation?",
"Are any of your parents Chinese?",
"Did you drink tea today?",
"Do you look younger than you are?",
"Are your eyes large?",
"Are you prompt?",
"Do you fall asleep easily?",
"Are you satisfied with your career path?",
"Are you left-handed?",
"Do you like Goya?",
"Do you like Jazz?",
"Do you know how to play chess?",
"Have you ever thought of adopting a child?",
"Do you practice any winter sports?",
"Are you in love?",
"Do you have very different political views from your parents?",
"Do you know anyone who has been unjustly accused of a crime?",
"Do you rent a flat?",
"Are you heterosexual?",
"Are you xenophobic?",
"Would you voluntarily join the army?",
"Are you an extrovert?",
"Do you use illegal drugs?"],
  ["Do you cupcakes look better than they taste?",
"Does the colour blue remind you of the sea?",
"Were you a shy child?",
"Do you fear God?",
"Do you believe this is a dream?",
"Do you trust any media outlet to be unbiased?",
"Do you think your vote is worth anything?",
"Have you ever felt too far from death?",
"Do you have both your thumbs?",
"Are you afraid of heights?",
"Do you live a free society?",
"Are you a vegetarian?",
"Do you care about politics?",
"Do you enjoy smoking?",
"Does winter evoke pleasant moments for you?",
"Do you live with your parents?",
"Do you regularly donate money to charity?",
"Are you often happy?",
"Do you practice Tai Chi?",
"Are you chinese?",
"Do you take sugar in your tea?",
"Do you lie about your age?",
"Are your eyes brown?",
"Would you consider yourself to be the type of person that strives to arrive on time for all occasions?",
"Are you satisfied in your current job?",
"Are you right handed?",
"Do you like painting?",
"Do you play a musical instrument?",
"Do you own a chessboard?",
"Do you have a child?",
"Do you enjoy skiing?",
"Have you ever hurt someone you loved?",
"Do millennials commonly have different political views than their elders?",
"Have you ever been arrested?",
"Do you live in a flat?",
"Are you bisexual?",
"Are you racist?",
"Have you ever shot a firearm?",
"Are you an introvert?"]
];

var oneSet = [
"Do you like cupcakes?", "Do you believe in God?", "Did you have a nice childhood?"
];

var myIndex = 1;

var currentQuestion = 0;

//pick a set
var randomSet = sets[Math.floor(Math.random() * sets.length)];

console.log(randomSet);



//shuffle the set
var shuffled = shuffle(randomSet);

document.getElementById('surveyContent').innerHTML = shuffled[currentQuestion];

function shuffle(j) {
  var currentIndex = j.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = j[currentIndex];
    j[currentIndex] = j[randomIndex];
    j[randomIndex] = temporaryValue;

    //no idea!
    // document.getElementById('surveyContent').innerHTML = j[0];
//write a for loop here? ^

    console.log(currentIndex);
  }

  return j;

}

console.log(shuffled[0]);


function nextElement(){
  currentQuestion++;
  if(currentQuestion < randomSet.length){
    document.getElementById('surveyContent').innerHTML = shuffled[currentQuestion];
  }
  else {
    document.getElementById('survey').innerHTML = "You're done!";
    document.getElementById('survey').setAttribute('id', 'finishedWords');
    document.getElementById('finish').style.display = "block";
  }

}



function showInstructions(){

document.getElementById('instructions').style.display = "block";
document.getElementById('permission').style.display = "none";
document.getElementById('stopButton').style.display = "block";


}


function showSurvey(){

document.getElementById('survey').style.display = "block";
document.getElementById('instructions').style.display = "none";
sin();

}

function modal() {

document.getElementById('myModal').style.display = "block";
document.getElementById('background').style.display = "block";

}

function showEmail() {


};

function cancelModal() {
  document.getElementById('myModal').style.display = "none";
  document.getElementById('background').style.display = "none";
}



</script>
</body>
</html>
